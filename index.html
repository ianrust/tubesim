<!DOCTYPE html>
<html>
	<head>
		<meta charset=utf-8>
		<title>SOCCER</title>
		<style>
			body { margin: 0; }
			canvas { width: 100%; height: 100% }
		</style>
	</head>
	<body>
		<div id="container"></div>
		<script src="js/three.js"></script>
		<script src="js/stats.js"></script>
		<script src="js/factory.js"></script>
		<script src="js/pitch.js"></script>
		<script src="recordings/u_got_that.json"></script>
		<script>
            var Module = {
                onRuntimeInitialized: () => {
                    var container, stats;

                    var scene = new THREE.Scene();

                    var camera = new THREE.PerspectiveCamera( 75, window.innerWidth / window.innerHeight, 0.1, 1000 );
                    var goals = new GoalController(scene, Module.getGoalsColor, song);

                    camera.rotation.x = Math.PI / 4.0;
                    camera.position.z = 13;
                    camera.position.y = -13;

                    var renderer = new THREE.WebGLRenderer();
                    renderer.setSize( window.innerWidth, window.innerHeight );
                    document.body.appendChild( renderer.domElement );
                    container = document.getElementById( 'container' );
                    container.appendChild( renderer.domElement );
                    stats = new Stats();
                    container.appendChild( stats.dom );

                    let tick = 0;
                    function animate() {
                        goals.update(tick);

                        requestAnimationFrame( animate );
                        renderer.render( scene, camera );
                        stats.update();

                        tick++;
                    }
                    animate();
                }
            };
		</script>
		<script src="js/patterns.js"></script>
	</body>
</html>